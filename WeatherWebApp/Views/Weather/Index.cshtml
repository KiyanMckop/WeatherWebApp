@model WeatherWebApp.Models.WeatherViewModel

@{
    ViewData["Title"] = "Weather App - Johannesburg";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link rel="stylesheet" href="/weatherapp/css/weather.css" asp-append-version="true" />

<div class="weather-container">
    <div class="page-title">
        <h1>ğŸŒ¤ï¸ Weather</h1>
        <p>Real-time weather updates for Johannesburg</p>
    </div>

    @if (Model != null && !string.IsNullOrEmpty(Model.City))
    {
        <!-- Current Weather Card -->
        <div class="weather-card">
            <div class="weather-card-header">
                <h5>Current Weather</h5>
            </div>
            <div class="weather-card-body">
                <div class="weather-info">
                    <div class="weather-info-item">
                        <div class="weather-info-label">Temperature</div>
                        <div class="weather-info-value">@Model.CurrentTemperatureÂ°<span style="font-size: 1.5rem;">C</span></div>
                    </div>
                    <div class="weather-info-item">
                        <div class="weather-info-label">Condition</div>
                        <div class="weather-info-value condition">@(Model.CurrentCondition ?? "N/A")</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Forecast Section -->
        @if (Model.Forecast != null && Model.Forecast.Count > 0)
        {
            <div class="forecast-section">
                <h3 class="section-title">ğŸ“… 5-Day Forecast</h3>
                <div class="forecast-table">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Temperature</th>
                                <th>Condition</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model.Forecast.Take(8))
                            {
                                <tr>
                                    <td>@item.Date.ToString("ddd, MMM dd")</td>
                                    <td><strong>@item.TemperatureÂ°C</strong></td>
                                    <td>@item.Condition</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        }

        <!-- Export Section -->
        <div class="export-section">
            <h3 class="section-title">ğŸ“Š Export Data</h3>
            
            <div class="export-group">
                <div class="export-group-title">Weather Data</div>
                <div class="export-buttons">
                    <a href="/weatherapp/Weather/ExportWeatherToCsv" class="btn-export btn-export-csv">
                        ğŸ“„ CSV
                    </a>
                    <a href="/weatherapp/Weather/ExportWeatherToExcel" class="btn-export btn-export-excel">
                        ğŸ“Š Excel
                    </a>
                </div>
            </div>

            <div class="export-group">
                <div class="export-group-title">Cities Data</div>
                <div class="export-buttons">
                    <a href="/weatherapp/Weather/ExportCitiesToCsv" class="btn-export btn-export-csv">
                        ğŸ“„ CSV
                    </a>
                    <a href="/weatherapp/Weather/ExportCitiesToExcel" class="btn-export btn-export-excel">
                        ğŸ“Š Excel
                    </a>
                </div>
            </div>

            <div class="export-group">
                <div class="export-group-title">Forecast Data</div>
                <div class="export-buttons">
                    <a href="/weatherapp/Weather/ExportForecastToCsv" class="btn-export btn-export-csv">
                        ğŸ“„ CSV
                    </a>
                    <a href="/weatherapp/Weather/ExportForecastToExcel" class="btn-export btn-export-excel">
                        ğŸ“Š Excel
                    </a>
                </div>
            </div>
        </div>
    }
    else
    {
        <div class="no-data">
            <div class="alert">
                âš ï¸ Unable to load weather data. Please refresh the page or try again later.
            </div>
        </div>
    }
</div>
